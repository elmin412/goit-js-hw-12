{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport async function getImages(query, currentPage, perPage) {\n  const KEY = \"42578241-c2049137a4025890cf19aabd8\";\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const IMAGE_TYPE = \"photo\";\n  const ORIENTATION = \"horizontal\";\n  const SAFESEARCH = \"true\";\n  const LINK = `${BASE_URL}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&page=${currentPage}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(LINK);\n    const images = response.data;\n    if (!response.data || !response.data.hits || response.data.hits.length === 0) {\n      throw new Error(\"No images found\");\n    }\n    \n    return images;\n\n  } catch (error) {\n    hideLoader();\n    throw error;\n  }\n}\n","export function renderImages(images) {\n    const container = document.querySelector(\".gallery\");\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                data-source=\"${largeImageURL}\"\n                alt=\"${tags}\"/></a>\n                <p><span class=\"image-items-text\">Likes: </span>${likes}</p>\n                <p><span class=\"image-items-text\">Views: </span>${views}</p>\n                <p><span class=\"image-items-text\">Comments: </span>${comments}</p>\n                <p><span class=\"image-items-text\">Downloads: </span>${downloads}</p>\n            </li>`;\n    }).join('') \n      container.insertAdjacentHTML(\"beforeend\", markup);\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\"form\");\nconst fetchButton = document.querySelector(\".search-btn\");\nconst container = document.querySelector(\".gallery\");\nconst searchInput = document.querySelector('input[type=\"text\"]');\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more-btn\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\nfunction clearGallery() {\n  container.innerHTML = \"\";\n}\n\nlet currentPage;\nlet currentQuery;\nconst perPage = 15;\nlet totalHits = 0;\n\nasync function markupImages(event) {\n  event.preventDefault();\n  const query = searchInput.value.trim();\n  clearGallery();\n  showLoader();\n  form.reset();\n  currentPage = 1;\n  currentQuery = query;\n  try {\n    const images = await getImages(query, currentPage, perPage);\n    const data = images.hits;\n    totalHits = images.totalHits;\n    renderImages(data);\n    hideLoader();\n    lightbox.refresh();\n    \n    if (data.length < perPage) {\n      loadMore.style.display = \"none\";\n      iziToast.info({\n        title: \"End of search results\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }  else {\n      loadMore.style.display = \"flex\";\n      \n    }\n  } catch (error) {\n    hideLoader();\n    loadMore.style.display = \"none\";\n    iziToast.error({\n      title: \"Error\",\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"topRight\",\n    });\n  }\n}\nfetchButton.addEventListener(\"click\", markupImages);\n\nloadMore.addEventListener(\"click\", async () => {\n  try {\n    currentPage += 1;\n    const images = await getImages(currentQuery, currentPage, perPage);\n    const data = images.hits;\n    renderImages(data);\n    lightbox.refresh();\n    const cardHeight = container.getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * cardHeight,\n      behavior: \"smooth\",\n    });\n    const currentHits = currentPage * perPage;\n    if (currentHits >= totalHits) {\n      loadMore.style.display = \"none\";\n      iziToast.info({\n        title: \"End of search results\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n});\n"],"names":["hideLoader","loader","getImages","query","currentPage","perPage","LINK","response","axios","images","error","renderImages","container","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","fetchButton","searchInput","loadMore","lightbox","SimpleLightbox","showLoader","clearGallery","currentQuery","totalHits","markupImages","event","data","iziToast","cardHeight"],"mappings":"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"}