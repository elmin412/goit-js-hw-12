{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport async function getImages(query) {\n  const KEY = \"42578241-c2049137a4025890cf19aabd8\";\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const IMAGE_TYPE = \"photo\";\n  const ORIENTATION = \"horizontal\";\n  const SAFESEARCH = \"true\";\n  const LINK = `${BASE_URL}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}`;\n\n  try {\n    const response = await axios.get(LINK);\n\n    if (!response.data || !response.data.hits || response.data.hits.length === 0) {\n      throw new Error(\"No images found\");\n    }\n\n    return response.data.hits;\n  } catch (error) {\n    hideLoader();\n    console.error(error.message);\n    throw error;\n  }\n}\n","export function renderImages(images) {\n    const container = document.querySelector(\".gallery\");\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                data-source=\"${largeImageURL}\"\n                alt=\"${tags}\"/></a>\n                <p><span class=\"image-items-text\">Likes: </span>${likes}</p>\n                <p><span class=\"image-items-text\">Views: </span>${views}</p>\n                <p><span class=\"image-items-text\">Comments: </span>${comments}</p>\n                <p><span class=\"image-items-text\">Downloads: </span>${downloads}</p>\n            </li>`;\n    }).join('')\n      container.insertAdjacentHTML(\"beforeend\", markup);\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst form = document.querySelector('form');\nconst fetchButton = document.querySelector(\".search-btn\");\nconst container = document.querySelector(\".gallery\");\nconst searchInput = document.querySelector('input[type=\"text\"]');\nconst loader = document.querySelector('.loader')\nconst loadMore = document.querySelector(\".load-more-btn\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n            captionsData: \"alt\",\n            captionDelay: 250,\n})\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\nfunction clearGallery() {\n    container.innerHTML = '';\n}\n\nasync function markupImages(event) {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    clearGallery();\n    showLoader();\n    form.reset();\n   try {\n     const images = await getImages(query);\n      renderImages(images);\n      hideLoader()\n      lightbox.refresh();\n     if (images.length > 1) {\n       loadMore.style.display = 'flex';\n     }\n  } \n    catch(error) {\n      hideLoader();\n        loadMore.style.display = 'none'; \n        iziToast.error({\n          title: \"Error\",\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n          position: \"topRight\",\n      });\n    };\n}\nfetchButton.addEventListener(\"click\", markupImages)\n\nlet page = 1;\nlet perPage = 15;\nconst  limit = 20;\nconst totalHits = Math.ceil(100 / limit);\n\nloadMore.addEventListener('click', async () => {\n  const query = searchInput.value.trim();\n  try {\n    const images = await getImages(query, page, limit, perPage );\n        renderImages(images);\n        lightbox.refresh();\n         page + 1;\n       const cardHeight = container.getBoundingClientRect().height;\n            window.scrollBy({\n            top: 2 * cardHeight,\n            behavior: 'smooth'\n  });\n    if (images.length > totalHits) {\n      loadMore.style.display = 'none';\n      iziToast.info({\n          title: \"End of search results\",\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: \"topRight\",\n      });\n    }\n    } catch (error) {\n        console.error(error.message);\n  }\n})\n\n"],"names":["hideLoader","loader","getImages","query","LINK","response","axios","error","renderImages","images","container","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","fetchButton","searchInput","loadMore","lightbox","SimpleLightbox","showLoader","clearGallery","markupImages","event","iziToast","page","perPage","limit","totalHits","cardHeight"],"mappings":"owBAEO,SAASA,GAAa,CAC3B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,CAEO,eAAeC,EAAUC,EAAO,CAMrC,MAAMC,EAAO,qEAA4BD,CAAK,2DAE9C,GAAI,CACF,MAAME,EAAW,MAAMC,EAAM,IAAIF,CAAI,EAErC,GAAI,CAACC,EAAS,MAAQ,CAACA,EAAS,KAAK,MAAQA,EAAS,KAAK,KAAK,SAAW,EACzE,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACdP,MAAAA,IACA,QAAQ,MAAMO,EAAM,OAAO,EACrBA,CACP,CACH,CC5BO,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAClF;AAAA,gDAC6BL,CAAa;AAAA;AAAA,uBAEtCD,CAAY;AAAA,+BACJC,CAAa;AAAA,uBACrBC,CAAI;AAAA,kEACuCC,CAAK;AAAA,kEACLC,CAAK;AAAA,qEACFC,CAAQ;AAAA,sEACPC,CAAS;AAAA,kBAE1E,EAAE,KAAK,EAAE,EACRR,EAAU,mBAAmB,YAAaC,CAAM,CACtD,CCHA,MAAMQ,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAc,SAAS,cAAc,aAAa,EAClDV,EAAY,SAAS,cAAc,UAAU,EAC7CW,EAAc,SAAS,cAAc,oBAAoB,EACzDpB,EAAS,SAAS,cAAc,SAAS,EACzCqB,EAAW,SAAS,cAAc,gBAAgB,EAElDC,EAAW,IAAIC,EAAe,aAAc,CACtC,aAAc,MACd,aAAc,GAC1B,CAAC,EAED,SAASC,GAAa,CAClBxB,EAAO,MAAM,QAAU,OAC3B,CACA,SAASD,GAAa,CAClBC,EAAO,MAAM,QAAU,MAC3B,CACA,SAASyB,GAAe,CACpBhB,EAAU,UAAY,EAC1B,CAEA,eAAeiB,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAMzB,EAAQkB,EAAY,MAAM,KAAI,EACpCK,IACAD,IACAN,EAAK,MAAK,EACX,GAAI,CACF,MAAMV,EAAS,MAAMP,EAAUC,CAAK,EACnCK,EAAaC,CAAM,EACnBT,EAAY,EACZuB,EAAS,QAAO,EACbd,EAAO,OAAS,IAClBa,EAAS,MAAM,QAAU,OAE7B,MACc,CACXtB,IACEsB,EAAS,MAAM,QAAU,OACzBO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,UACpB,CAAO,CACP,CACA,CACAT,EAAY,iBAAiB,QAASO,CAAY,EAElD,IAAIG,EAAO,EACPC,EAAU,GACd,MAAOC,EAAQ,GACTC,EAAY,KAAK,KAAK,IAAMD,CAAK,EAEvCV,EAAS,iBAAiB,QAAS,SAAY,CAC7C,MAAMnB,EAAQkB,EAAY,MAAM,KAAI,EACpC,GAAI,CACF,MAAMZ,EAAS,MAAMP,EAAUC,EAAO2B,EAAME,EAAOD,GAC/CvB,EAAaC,CAAM,EACnBc,EAAS,QAAO,EACfO,EAAO,EACT,MAAMI,EAAaxB,EAAU,sBAAqB,EAAG,OAChD,OAAO,SAAS,CAChB,IAAK,EAAIwB,EACT,SAAU,QACtB,CAAG,EACKzB,EAAO,OAASwB,IAClBX,EAAS,MAAM,QAAU,OACzBO,EAAS,KAAK,CACV,MAAO,wBACP,QAAS,6DACT,SAAU,UACpB,CAAO,EAEF,OAAQtB,EAAO,CACZ,QAAQ,MAAMA,EAAM,OAAO,CAChC,CACH,CAAC"}